<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instrucalc</title>
  <link rel="icon" type="image/x-icon" href="./icon-192.png">
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="./validation-styles.css">
  <link rel="manifest" href="manifest.json">
</head>

<body>
  <header>
    <div>Calculadora</div>
  </header>
  <form class="calculator-container" id="calculatorForm" novalidate>
    <div class="calculation-options" id="form">
      <ul>
        <li>
          <label for="calcSpan">
            <input type="radio" name="calc-option" id="calcSpan">
            Calcular Span
          </label>
        </li>
        <li>
          <label for="sal-var">
            <input type="radio" name="calc-option" id="sal-var">
            Corriente mA → Variable medida
          </label>
        </li>
        <li>
          <label for="var-sal">
            <input type="radio" name="calc-option" id="var-sal">
            Variable medida → Corriente (mA)
          </label>
        </li>
        <li>
          <label for="sal-inst">
            <input type="radio" name="calc-option" id="sal-inst">
            Salida del instrumento (3-15) psi → Variable
          </label>
        </li>
        <li>
          <label for="var-sal-psi">
            <input type="radio" name="calc-option" id="var-sal-psi">
            Variable → Salida del instrumento (3-15) psi
          </label>
        </li>
      </ul>
    </div>

    <div class="form">
      <ul>
        <li class="li-fixed">
          <label for="lim-inf-range">
            Limite inferior Rango (LRV) *
          </label>
          <input type="number" step="any" inputmode="decimal" id="lim-inf-range" name="lim-inf-range" required 
                 title="Ingrese el límite inferior del rango" />
        </li>
        <li class="li-calcSpan li-variable hidden">
          <label for="lim-sup-range">
            Limite Superior Rango (URV) *
          </label>
          <input type="number" step="any" inputmode="decimal" id="lim-sup-range" name="lim-sup-range"
                 title="Ingrese el límite superior del rango" />
        </li>
        <li class="li-salmA li-var-sal li-sal-inst li-var-sal-psi li-variable hidden">
          <label for="span">
            Span *
          </label>
          <input type="number" step="any" inputmode="decimal" id="span" name="span" min="0.001"
                 title="Ingrese el span (debe ser mayor a 0)" />
        </li>
        <li class="li-salmA li-variable hidden">
          <label for="current">
            Current (4-20) mA *
          </label>
          <input type="number" step="any" inputmode="decimal" id="current" name="current" min="4" max="20"
                 title="Ingrese la corriente entre 4 y 20 mA" />
        </li>
        <li class="li-var-sal li-variable hidden">
          <label for="measured-var">
            Variable medida *
          </label>
          <input type="number" step="any" inputmode="decimal" id="measured-var" name="measured-var"
                 title="Ingrese la variable medida" />
        </li>
        <li class="li-sal-inst li-variable hidden" id="lispan">
          <label for="salidaInst">
            Salida del instrumento (3-15) psi *
          </label>
          <input type="number" step="any" inputmode="decimal" id="salidaInst" name="salidaInst" min="3" max="15"
                 title="Ingrese la salida entre 3 y 15 psi" />
        </li>
        <li class="li-var-sal-psi li-variable hidden">
          <label for="variable">
            Variable *
          </label>
          <input type="number" step="any" inputmode="decimal" id="variable" name="variable"
                 title="Ingrese la variable" />
        </li>
        <li class="li-fixed">
          <label for="result" id="result-lbl">
            Resultado
          </label>
          <input class="input-result" type="text" id="result" readonly />
        </li>
        <li class="li-percent li-variable hidden">
          <label for="result">
            Procentaje % de PV respecto al SPAN
          </label>
          <input class="input-percent" type="text" id="percent" readonly />
        </li>
      </ul>
    </div>

    <div class="buttons">
      <button type="submit" id="resultBtn">=</button>
      <button type="button" id="clearBtn">Clear</button>
    </div>

    <script type="module" src="./SRC/app.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register("./sw.js")
            .then(reg => {
              console.log("✅ Service Worker registrado:", reg.scope);
            })
            .catch(err => {
              console.error("❌ Error al registrar SW:", err);
            });
        });
      }
    </script>
  </form>
</body>

</html>